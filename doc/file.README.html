<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta name="Content-Type" content="text/html; charset=utf8" />
<title>OperaWatir</title>
<link rel="stylesheet" href="css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="js/app.js"></script>

  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="_index.html" title="Index">Index</a> &raquo; 
    <span class="title">File: README</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  <a id="class_list_link" href="#">Class List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><div id='filecontents'><h1>Readme</h1>

<p><a href="http://operawatir.org/">OperaWatir</a> is a part of the <a href="http://watir.com/">Watir</a> (pronounced <em>water</em>) family of free software Ruby libraries for automating web browsers.  OperaWatir provides a querying engine and Ruby bindings for a backend Java library, OperaDriver, for driving the <a href="http://opera.com/">Opera web browser</a>.  It aims for full compliance with the <a href="https://github.com/jarib/watirspec">watirspec</a> specification.</p>

<p>License:: <a href="https://github.com/operasoftware/operawatir/blob/master/LICENSE">New BSD</a>
Project Home:: <a href="http://operawatir.org/">http://operawatir.org/</a>
Source Code:: <a href="https://github.com/operasoftware/operawatir">https://github.com/operasoftware/operawatir</a>
Mailing List:: <a href="https://list.opera.com/mailman/listinfo/operawatir-users">https://list.opera.com/mailman/listinfo/operawatir-users</a>
Issues:: <a href="https://github.com/operasoftware/operawatir/issues">https://github.com/operasoftware/operawatir/issues</a>
Gem:: <a href="http://rubygems.org/gems/operawatir">https://rubygems.org/operawatir</a></p>

<h2>Third-Party Libraries</h2>

<p>OperaDriver uses the following third-party Java libraries:</p>

<ul>
<li><a href="http://code.google.com/p/protobuf/">Google protobuf</a> (New BSD License)</li>
<li><a href="http://commons.apache.org/jxpath/">Apache Commons JXPath</a> (Apache 2.0 License)</li>
</ul>

<p>More information about the New BSD (AKA Modified BSD or BSD-3) and Apache 2.0 licenses can be found in the appropriate text files in <code>lib/operadriver</code>.</p>

<p>OperaWatir uses the following libraries:</p>

<ul>
<li><a href="https://github.com/rspec/rspec">rspec</a> (MIT License)</li>
<li><a href="https://github.com/technicalpickles/jeweler">jeweler</a> (MIT License)</li>
<li><a href="https://github.com/jimweirich/rake">rake</a> (MIT License)</li>
<li><a href="https://github.com/lsegal/yard">yard</a> (MIT License)</li>
<li><a href="http://rubyforge.org/projects/mongrel">mongrel</a> (Ruby License)</li>
<li><a href="http://www.sinatrarb.com/">sinatra</a> (MIT License)</li>
<li><a href="http://rubyforge.org/projects/double-ruby">rr</a> (MIT License)</li>
</ul>

<h2>Install</h2>

<h3>Requirements</h3>

<p>OperaWatir runs on GNU/Linux and Windows operating systems.  Other UNIX-like systems, such as BSD and OS X, are not currently supported, but support is planned.  Required dependencies are <em>Java</em> >= 1.6.0, <em>JRuby</em> >= 1.5.1 (ruby 1.8.7 patchlevel 249), <em>RubyGems</em> >= 1.3.5, <em>RSpec</em> >= 2.0.0, and a somewhat recent desktop or nightly build of Opera.</p>

<h3>Installation procedure</h3>

<p>Make sure that you have the right requirements for installing and running OperaWatir.  Please note that OperaWatir will only run on the JRuby platform. For more detailed installation instructions, please see our <a href="http://operasoftware.github.com/operawatir/tutorial.html">Getting Started</a> guide.</p>

<p>To install (leave out the “sudo” command if you're installing on Windows):</p>

<pre class="code"><span class='string val'>% sudo </span><span class='jruby identifier id'>jruby</span> <span class='minus op'>-</span><span class='S constant id'>S</span> <span class='gem identifier id'>gem</span> <span class='install identifier id'>install</span> <span class='operawatir identifier id'>operawatir</span>
</pre>

<p>Next, make sure that JRuby's <code>bin</code> directory is a part of your <code>PATH</code> environmental variable on GNU/Linux.</p>

<h2>Limitations</h2>

<p><strong>Before you get started playing with OperaWatir, there are a few important things you need to keep in mind.</strong></p>

<p>This is a <strong>pre-release</strong> of OperaWatir (0.3), and should not be considered stable or suitable for use in production.  It should be treated as a proof of concept. </p>

<p>It is not possible to run OperaWatir without specifying the <code>OPERA_PATH</code> (full path to Opera binary) and <code>OPERA_LAUNCHER</code> (full path to Opera launcher binary) environmental variables. </p>

<p>Since the launcher applications are not shipped with the latest public release of Opera, we have bundled them with the gem.  They can be found in <code>./utils/launchers/</code> under the gem's directory (typically <code>/usr/lib/jruby/lib/ruby/gems/1.8/gems/operawatir-0.3-java/utils/launchers/</code> on GNU/Linux systems and <code>C:\JRuby-1.5.2\lib\ruby\gems\1.8\gems\operawatir-0.3-java\utils\launchers\</code> on Windows).  The launchers provided will work on 32-bit GNU/Linux and Windows operating systems.  OS X support is planned.</p>

<h2>Examples</h2>

<p>The Watir API allows you to write scripts that interact with any web page.  Its primary purpose is to ease test automation for web applications.  Your scripts can, for example, before you deploy automatically go through all the steps your users normally would and alert you of any regressions. </p>

<p>Let's take a closer look at how this works. </p>

<pre class="code"><span class='require identifier id'>require</span> <span class='string val'>'rubygems'</span>
<span class='require identifier id'>require</span> <span class='string val'>'operawatir'</span>

<span class='browser identifier id'>browser</span> <span class='assign token'>=</span> <span class='OperaWatir constant id'>OperaWatir</span><span class='colon2 op'>::</span><span class='Browser constant id'>Browser</span><span class='dot token'>.</span><span class='new identifier id'>new</span>

<span class='browser identifier id'>browser</span><span class='dot token'>.</span><span class='goto identifier id'>goto</span> <span class='string val'>'http://en.wikipedia.org/'</span>
<span class='browser identifier id'>browser</span><span class='dot token'>.</span><span class='text_field identifier id'>text_field</span><span class='lparen token'>(</span><span class='symbol val'>:id</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'searchInput'</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='set identifier id'>set</span> <span class='string val'>'Opera'</span>
<span class='browser identifier id'>browser</span><span class='dot token'>.</span><span class='button identifier id'>button</span><span class='lparen token'>(</span><span class='symbol val'>:id</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'searchButton'</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='click identifier id'>click</span>
</pre>

<p>The script above will tell the browser to load the front page of Wikipedia, write “Opera” in the search field and click the search button.  If all goes as intended, the browser will end up at a relevant article. </p>

<p>To run the script, use the following command:</p>

<pre class="code"><span class='string val'>% jruby </span><span class='example identifier id'>example</span><span class='dot token'>.</span><span class='rb identifier id'>rb</span>
</pre>

<p>As Watir scripts are run in a full-featured browser, all keypresses and clicks will be interpreted as if they were real, and invoke attached JavaScript event listeners.  If we want to test the JavaScript-powered suggestion feature on the Wikipedia search box, we can do this: </p>

<pre class="code"><span class='require identifier id'>require</span> <span class='string val'>'rubygems'</span>
<span class='require identifier id'>require</span> <span class='string val'>'operawatir'</span>

<span class='browser identifier id'>browser</span> <span class='assign token'>=</span> <span class='OperaWatir constant id'>OperaWatir</span><span class='colon2 op'>::</span><span class='Browser constant id'>Browser</span><span class='dot token'>.</span><span class='new identifier id'>new</span>

<span class='browser identifier id'>browser</span><span class='dot token'>.</span><span class='goto identifier id'>goto</span> <span class='string val'>'http://en.wikipedia.org/'</span>
<span class='browser identifier id'>browser</span><span class='dot token'>.</span><span class='text_field identifier id'>text_field</span><span class='lparen token'>(</span><span class='symbol val'>:id</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'searchInput'</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='click identifier id'>click</span>
<span class='browser identifier id'>browser</span><span class='dot token'>.</span><span class='type identifier id'>type</span> <span class='string val'>'Hello world'</span>
<span class='browser identifier id'>browser</span><span class='dot token'>.</span><span class='key identifier id'>key</span> <span class='string val'>'Down'</span>
<span class='browser identifier id'>browser</span><span class='dot token'>.</span><span class='key identifier id'>key</span> <span class='string val'>'Enter'</span>
</pre>

<p>The first suggested link will be selected by pressing arrow down (<code>'Down'</code>) and navigated to (<code>'Enter'</code>).  Using the same key events, you could even teach a script to play platform games: </p>

<pre class="code"><span class='require identifier id'>require</span> <span class='string val'>'rubygems'</span>
<span class='require identifier id'>require</span> <span class='string val'>'operawatir'</span>

<span class='browser identifier id'>browser</span><span class='dot token'>.</span><span class='goto identifier id'>goto</span> <span class='string val'>'http://www.phoboslab.org/biolab/'</span>
<span class='sleep identifier id'>sleep</span> <span class='integer val'>2</span>
<span class='browser identifier id'>browser</span><span class='dot token'>.</span><span class='key identifier id'>key</span> <span class='string val'>'X'</span>
<span class='sleep identifier id'>sleep</span> <span class='integer val'>1</span>
<span class='browser identifier id'>browser</span><span class='dot token'>.</span><span class='key_down identifier id'>key_down</span> <span class='string val'>'Right'</span>
<span class='float val'>5</span><span class='dot token'>.</span><span class='times identifier id'>times</span> <span class='lbrace token'>{</span> <span class='browser identifier id'>browser</span><span class='dot token'>.</span><span class='key identifier id'>key</span> <span class='string val'>'X'</span> <span class='rbrace token'>}</span>
<span class='float val'>2</span><span class='dot token'>.</span><span class='times identifier id'>times</span> <span class='lbrace token'>{</span> <span class='browser identifier id'>browser</span><span class='dot token'>.</span><span class='key identifier id'>key</span> <span class='string val'>'C'</span> <span class='rbrace token'>}</span>
<span class='browser identifier id'>browser</span><span class='dot token'>.</span><span class='key_up identifier id'>key_up</span> <span class='string val'>'Right'</span>
</pre>

<p>Sending commands to the browser is great, but sometimes we want to get something back too.  The following lines of code will have the browser automatically look up the phone number of Opera Software in the <a href="http://gulesider.no/">yellow pages</a> and write it to the console.</p>

<pre class="code"><span class='require identifier id'>require</span> <span class='string val'>'rubygems'</span>
<span class='require identifier id'>require</span> <span class='string val'>'operawatir'</span>

<span class='browser identifier id'>browser</span> <span class='assign token'>=</span> <span class='OperaWatir constant id'>OperaWatir</span><span class='colon2 op'>::</span><span class='Browser constant id'>Browser</span><span class='dot token'>.</span><span class='new identifier id'>new</span>

<span class='browser identifier id'>browser</span><span class='dot token'>.</span><span class='goto identifier id'>goto</span> <span class='string val'>'http://gulesider.no/'</span>
<span class='browser identifier id'>browser</span><span class='dot token'>.</span><span class='text_field identifier id'>text_field</span><span class='lparen token'>(</span><span class='symbol val'>:name</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'search_word'</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='set identifier id'>set</span> <span class='string val'>'Opera Software'</span>
<span class='browser identifier id'>browser</span><span class='dot token'>.</span><span class='button identifier id'>button</span><span class='lparen token'>(</span><span class='symbol val'>:name</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'btn_cs'</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='click identifier id'>click</span>
<span class='puts identifier id'>puts</span> <span class='browser identifier id'>browser</span><span class='dot token'>.</span><span class='li identifier id'>li</span><span class='lparen token'>(</span><span class='symbol val'>:class</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'tel'</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='text identifier id'>text</span>
</pre>

<p>When running proper functional tests on your web application with Watir, you might want a bit more structured output.  To define assertions and get pretty test reports, you can use <a href="http://rspec.info/">RSpec</a>, a behaviour-driven testing framework. </p>

<p>When writing test suites you can use the OperaWatir::Helper class to help ease some tasks, such as constructing and tearing down the Browser object.  A simple test suite looks like this:</p>

<pre class="code"><span class='describe identifier id'>describe</span> <span class='string val'>'Yellow Pages'</span> <span class='do do kw'>do</span>
  <span class='before identifier id'>before</span> <span class='symbol val'>:each</span> <span class='do do kw'>do</span>
    <span class='browser identifier id'>browser</span><span class='dot token'>.</span><span class='goto identifier id'>goto</span> <span class='string val'>'http://gulesider.no/'</span>
  <span class='end end kw'>end</span>

  <span class='it identifier id'>it</span> <span class='string val'>'finds the phone number to Opera Software'</span> <span class='do do kw'>do</span>
    <span class='browser identifier id'>browser</span><span class='dot token'>.</span><span class='text_field identifier id'>text_field</span><span class='lparen token'>(</span><span class='symbol val'>:name</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'search_word'</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='set identifier id'>set</span> <span class='string val'>'Opera Software'</span>
    <span class='browser identifier id'>browser</span><span class='dot token'>.</span><span class='button identifier id'>button</span><span class='lparen token'>(</span><span class='symbol val'>:name</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'btn_cs'</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='click identifier id'>click</span>
    <span class='browser identifier id'>browser</span><span class='dot token'>.</span><span class='li identifier id'>li</span><span class='lparen token'>(</span><span class='symbol val'>:class</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'tel'</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='text identifier id'>text</span><span class='dot token'>.</span><span class='should identifier id'>should</span> <span class='eq op'>==</span> <span class='string val'>'24 16 40 00'</span>
  <span class='end end kw'>end</span>

  <span class='it identifier id'>it</span> <span class='string val'>'finds the phone number to the Norwegian Opera and Ballet'</span> <span class='do do kw'>do</span>
    <span class='browser identifier id'>browser</span><span class='dot token'>.</span><span class='text_field identifier id'>text_field</span><span class='lparen token'>(</span><span class='symbol val'>:name</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'search_word'</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='set identifier id'>set</span> <span class='string val'>'Den Norske Opera'</span>
    <span class='browser identifier id'>browser</span><span class='dot token'>.</span><span class='button identifier id'>button</span><span class='lparen token'>(</span><span class='symbol val'>:name</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'btn_cs'</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='click identifier id'>click</span>
    <span class='browser identifier id'>browser</span><span class='dot token'>.</span><span class='li identifier id'>li</span><span class='lparen token'>(</span><span class='symbol val'>:class</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'tel'</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='text identifier id'>text</span><span class='dot token'>.</span><span class='should identifier id'>should</span> <span class='eq op'>==</span> <span class='string val'>'21 42 21 00'</span>
  <span class='end end kw'>end</span>
<span class='end end kw'>end</span>
</pre>

<p>Since this is an RSpec test you can run it using the operawatir binary, which is simply a shortcut for running tests: </p>

<pre class="code"><span class='string val'>% operawatir </span><span class='yellow_pages identifier id'>yellow_pages</span><span class='dot token'>.</span><span class='rb identifier id'>rb</span>
</pre>

<p>Each block of code corresponds to a single named test case returning PASS or FAIL.  Whether you got back the expected and correct return value is evaluated with <code>.should</code>.  If all tests pass, you will see the following output: </p>

<pre class="code"><span class='dot2 op'>..</span>

<span class='Finished constant id'>Finished</span> <span class='in in kw'>in</span> <span class='float val'>2.04</span> <span class='seconds identifier id'>seconds</span>
<span class='integer val'>2</span> <span class='examples identifier id'>examples</span><span class='comma token'>,</span> <span class='integer val'>0</span> <span class='failures identifier id'>failures</span>
</pre>

<p>If anything fails, more information about each failure will be provided.</p>

<h2>Merry Christmas!</h2>

<p>Despite its shortcomings, we hope you will enjoy playing around with the Watir libraries for using OperaDriver driving Opera. We decided that we would rather see it go out to the public before Christmas than waiting for another month or two until it is pristine and perfect. </p>

<p>One of the things we are most excited about is the new Watir 2 API that we have made a prototype implementation of, which is based on <a href="https://github.com/jarib/watir-webdriver/wiki/Comparison-with-Watir-1.X">Jari Bakken's ideas for a new API</a>. On top of this, we have written a Watir 1 compatibility layer which is switched on by default. We are looking forward to the design discussions that this will bring. Oh, and by the way, will you be able to find the magic switch for Watir 2? (-; </p>

<p>We hope you'll enjoy this little Christmas gift! Furthermore, we wish you a Merry Christmas and a Happy New Year from us here at Opera Software in Oslo!</p></div></div>
    
    <div id="footer">
  Generated on Fri Dec 17 19:59:00 2010 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.6.3 (ruby-1.8.7).
</div>

  </body>
</html>