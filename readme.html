<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Readme | OperaWatir</title>
    <link href="look/generic.css" rel="stylesheet" />
    <link href="look/github.css" rel="stylesheet" />
    <script src="scripts/highlight.pack.js"></script>
    <script>
      hljs.initHighlightingOnLoad();
    </script>
  </head>
  <body>

    <div class="ribbon">
      <a href="http://github.com/operasoftware/operawatir" rel="me">Fork
        me on Github!</a>
    </div>

    <header class="highlight-bright">
      <div class="wrapper">
        <h1><a href="index.html">OperaWatir</a></h1>

        <nav>
          <ul>
            <li><a href="index.html">Index</a></li>
            <li><a href="tutorial.html">Tutorial</a></li>
            <li class="selected"><a href="documentation.html">Documentation</a></li>
            <li><a href="http://github.com/operasoftware/operawatir">Source</a></li>
          </ul>
        </nav>
      </div>
    </header>

    <section id="content">
      <div class="wrapper">
        <h2>Readme</h2>

	<p>
	  <a href="http://operawatir.org/">OperaWatir</a> is a part of
	  the <a href="http://watir.com/">Watir</a>
	  (pronounced <em>water</em>) family of free software Ruby
	  libraries for automating web browsers.  OperaWatir provides
	  a querying engine and Ruby bindings for a backend Java
	  library, OperaDriver, for driving
	  the <a href="http://opera.com/">Opera web browser</a>.  It
	  aims for full compliance with
	  the <a href="https://github.com/jarib/watirspec">watirspec</a>
	  specification.
	</p>

	<dl>
	  <dt>License</dt>
	  <dd><a href="https://github.com/operasoftware/operawatir/blob/master/LICENSE">New BSD</a></dd>

	  <dt>Project Home</dt>
	  <dd><a href="http://operawatir.org/">http://operawatir.org/</a></dd>

	  <dt>Source Code</dt>
	  <dd><a href="https://github.com/operasoftware/operawatir">https://github.com/operasoftware/operawatir</a></dd>

	  <dt>Mailing List</dt>
	  <dd><a href="https://list.opera.com/mailman/listinfo/operawatir-users">https://list.opera.com/mailman/listinfo/operawatir-users</a></dd>

	  <dt>Issues</dt>
	  <dd><a href="https://github.com/operasoftware/operawatir/issues">https://github.com/operasoftware/operawatir/issues</a></dd>

	  <dt>Gem</dt>
	  <dd><a href="http://rubygems.org/gems/operawatir">htp://rubygems.org/gems/operawatir</a></dd>
	</dl>


	<h3>Install</h3>

	<h4>Requirements</h4>

	<p>
	  OperaWatir runs on GNU/Linux and Windows operating systems.
	  Other UNIX-like systems, such as BSD and OS X, are not
	  currently supported, but support is planned.  Required
	  dependencies are
	  <em>Java</em> >= 1.6.0, <em>JRuby</em> >= 1.5.1 (ruby 1.8.7
	  patchlevel 249), <em>RubyGems</em> >= 1.3.5, <em>RSpec</em>
	  >= 2.0.0, and a somewhat recent desktop or nightly build of
	  Opera.
	</p>


	<h4>Installation procedure</h4>

	<p>
	  Make sure that you have the right requirements for
	  installing and running OperaWatir.  Please note that
	  OperaWatir will only run on the JRuby platform.  For more
	  detailed installation instructions, please see
	  our <a href="tutorial.html">Getting Started</a> guide.
	</p>

	<p>
	  To install (leave out the “sudo” command if you're
	  installing on Windows):
	</p>

	<pre><code class="prompt"><span class="line">sudo jruby -S gem install operawatir</span></code></pre>

	<p>
	  Next, make sure that JRuby's <var>bin</var> directory is a
	  part of your <var>PATH</var> environmental variable on
	  GNU/Linux.
	</p>


	<h3>Limitations</h3>

	<p id="important">
	  Before you get started playing with OperaWatir, there are a few
	  important things you need to keep in mind.
	</p>

	<p>
	  This is a <strong>pre-release</strong> of OperaWatir (0.3),
	  and should not be considered stable or suitable for use in
	  production.  It should be treated as a proof of concept.
	</p>

	<p>
	  It is not possible to run OperaWatir without specifying
	  the <var>OPERA_PATH</var> (full path to Opera binary)
	  and <var>OPERA_LAUNCHER</var> (full path to Opera launcher
	  binary) environmental variables.
	</p>

	<p>
	  Since the launcher applications are not shipped with the
	  latest public release of Opera, we have bundled them with
	  the gem.  They can be found
	  in <code>./utils/launchers/</code> under the gem's directory
	  (typically <code>/usr/lib/jruby/lib/ruby/gems/1.8/gems/operawatir-0.3-java/utils/launchers/</code>
	  on GNU/Linux systems
	  and <code>C:\JRuby-1.5.2\lib\ruby\gems\1.8\gems\operawatir-0.3-java\utils\launchers\</code>
	  on Windows).  The launchers provided will work on 32-bit
	  GNU/Linux and Windows operating systems.  OS X support is
	  planned.
	</p>


	<h3>Examples</h3>

	<p>
	  The Watir API allows you to write scripts that interact with
	  any web page.  Its primary purpose is to ease test
	  automation for web applications.  Your scripts can, for
	  example, before you deploy automatically go through all the
	  steps your users normally would and alert you of any
	  regressions.
        </p>

	<p>
	  Let's take a closer look at how this works.
	</p>

<pre><code>require 'rubygems'
require 'operawatir'

browser = OperaWatir::Browser.new

browser.goto 'http://en.wikipedia.org/'
browser.text_field(:id => 'searchInput').set 'Opera'
browser.button(:id => 'searchButton').click</pre></code>

        <p>
	  The script above will tell the browser to load
	  the <a href="http://en.wikipedia.org/">front page of
	  Wikipedia</a>, write “Opera” in the search field and click
	  the search button.  If all goes as intended, the browser
	  will end up
	  at <a href="http://en.wikipedia.org/wiki/Opera">a relevant
	  article</a>.
	</p>

	<p>
	  To run the script, use the following command:
	</p>

	<pre><code class="prompt"><span class="line">jruby <var>example.rb</var></span></code></pre>

	<p>
	  As Watir scripts are run in a full-featured browser, all
	  keypresses and clicks will be interpreted as if they were
	  real, and invoke attached JavaScript event listeners.  If we
	  want to test the JavaScript-powered suggestion feature on
	  the Wikipedia search box, we can do this:
	</p>

<pre><code>require 'rubygems'
require 'operawatir'

browser = OperaWatir::Browser.new

browser.goto 'http://en.wikipedia.org/'
browser.text_field(:id => 'searchInput').click
browser.type 'Hello world'
browser.key 'Down'
browser.key 'Enter'</code></pre>

        <p>
	  The first suggested link will be selected by pressing arrow
	  down (<code>'Down'</code>) and navigated to
	  (<code>'Enter'</code>).  Using the same key events, you
	  could even teach a script to play platform games:
	</p>

<pre><code>require 'rubygems'
require 'operawatir'

browser.goto 'http://www.phoboslab.org/biolab/'
sleep 2
browser.key 'X'
sleep 1
browser.key_down 'Right'
5.times { browser.key 'X' }
2.times { browser.key 'C' }
browser.key_up 'Right'</code></pre>

        <p>
	  Sending commands to the browser is great, but sometimes we
	  want to get something back too.  The following lines of code
	  will have the browser automatically look up the phone number
	  of Opera Software in the
	  <a href="http://gulesider.no/">yellow pages</a> and write it
	  to the console.
	</p>

<pre><code>require 'rubygems'
require 'operawatir'

browser = OperaWatir::Browser.new

browser.goto 'http://gulesider.no/'
browser.text_field(:name => 'search_word').set 'Opera Software'
browser.button(:name => 'btn_cs').click
puts browser.li(:class => 'tel').text</pre></code>

        <p>
	  When running proper functional tests on your web application
	  with Watir, you might want a bit more structured output.  To
	  define assertions and get pretty test reports, you can
	  use <a href="http://rspec.info/">RSpec</a>, a
	  behaviour-driven testing framework.
	</p>

	<p>
	  When writing test suites you can use the OperaWatir::Helper
	  class to help ease some tasks, such as constructing and
	  tearing down the Browser object.  A simple test suite looks
	  like this:
	</p>

<pre><code>require 'operawatir/helper'

describe 'Yellow Pages' do
  before :each do
    browser.goto 'http://gulesider.no/'
  end

  it 'finds the phone number to Opera Software' do
    browser.text_field(:name => 'search_word').set 'Opera Software'
    browser.button(:name => 'btn_cs').click
    browser.li(:class => 'tel').text.should == '24 16 40 00'
  end

  it 'finds the phone number to the Norwegian Opera and Ballet' do
    browser.text_field(:name => 'search_word').set 'Den Norske Opera'
    browser.button(:name => 'btn_cs').click
    browser.li(:class => 'tel').text.should == '21 42 21 00'
  end
end</code></pre>

        <p>
	  Since this is an RSpec test you can run it using the
	  operawatir binary, which is simply a shortcut for running
	  tests:
	</p>

	<pre><code class="prompt"><span class="line">operawatir yellow_pages.rb</span></code></pre>

        <p>
	  Each block of code corresponds to a single named test case
	  returning PASS or FAIL.  Whether you got back the expected
	  and correct return value is evaluated
	  with <code>.should</code>.  If all tests pass, you will see
	  the following output:
	</p>

<pre><code class="no-highlight prompt"><span style="color: rgb(0,255,0)">..</span>

Finished in 2.04 seconds
2 examples, 0 failures</code></pre>

        <p>
	  If anything fails, more information about each failure will
	  be provided.
	</p>


	<h3>Merry Christmas!</h3>

	<p>
	  Despite its shortcomings, we hope you will enjoy playing
	  around with the Watir libraries for using OperaDriver
	  driving Opera.  We decided that we would rather see it go
	  out to the public before Christmas than waiting for another
	  month or two until it is pristine and perfect.
	</p>

	<p>
	  One of the things we are most excited about is the new Watir
	  2 API that we have made a prototype implementation of, which
	  is based
	  on <a href="https://github.com/jarib/watir-webdriver/wiki/Comparison-with-Watir-1.X">Jari
	  Bakken's ideas for a new API</a>.  On top of this, we have
	  written a Watir 1 compatibility layer which is switched on
	  by default.  We are looking forward to the design
	  discussions that this will bring.  Oh, and by the way, will
	  you be able to find the magic switch for Watir 2? (-;
	</p>

	<p>
	  We hope you'll enjoy this little Christmas gift!
	  Furthermore, we wish you a Merry Christmas and a Happy New
	  Year from us here at Opera Software in Oslo!
	</p>
      </div>
    </section>

    <footer>
      <div class="wrapper">
        <p id="logo">
          <a href="http://opera.com/"><img src="graphics/opera-footer.gif" alt="" /></a>
        </p>

        <p>
          Copyright © 2010 <a href="http://opera.com/">Opera Software ASA</a>.
        </p>
      </div>
    </footer>

  </body>
</html>
